{
  "version": 3,
  "sources": ["../../../dev/gui/src/2D/controls/container.ts"],
  "sourcesContent": ["import type { Nullable } from \"core/types\";\r\nimport { Logger } from \"core/Misc/logger\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { Measure } from \"../measure\";\r\nimport type { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\nimport { DynamicTexture } from \"core/Materials/Textures/dynamicTexture\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport { Constants } from \"core/Engines/constants\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport type { BaseGradient } from \"./gradient/BaseGradient\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { Matrix2D } from \"../math2D\";\r\n\r\n/**\r\n * Root class for 2D containers\r\n * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#containers\r\n */\r\nexport class Container extends Control {\r\n    /** @internal */\r\n    public _children = new Array<Control>();\r\n    /** @internal */\r\n    protected _measureForChildren = Measure.Empty();\r\n    /** @internal */\r\n    protected _background = \"\";\r\n    /** @internal */\r\n    protected _backgroundGradient: Nullable<BaseGradient> = null;\r\n    /** @internal */\r\n    protected _adaptWidthToChildren = false;\r\n    /** @internal */\r\n    protected _adaptHeightToChildren = false;\r\n    /** @internal */\r\n    protected _renderToIntermediateTexture: boolean = false;\r\n    /** @internal */\r\n    protected _intermediateTexture: Nullable<DynamicTexture> = null;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that the container will let internal controls handle picking instead of doing it directly using its bounding info\r\n     */\r\n    @serialize()\r\n    public delegatePickingToChildren = false;\r\n\r\n    /** Gets or sets boolean indicating if children should be rendered to an intermediate texture rather than directly to host, useful for alpha blending */\r\n    @serialize()\r\n    public get renderToIntermediateTexture(): boolean {\r\n        return this._renderToIntermediateTexture;\r\n    }\r\n    public set renderToIntermediateTexture(value: boolean) {\r\n        if (this._renderToIntermediateTexture === value) {\r\n            return;\r\n        }\r\n        this._renderToIntermediateTexture = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that layout cycle errors should be displayed on the console\r\n     */\r\n    public logLayoutCycleErrors = false;\r\n\r\n    /**\r\n     * Gets or sets the number of layout cycles (a change involved by a control while evaluating the layout) allowed\r\n     */\r\n    @serialize()\r\n    public maxLayoutCycle = 3;\r\n\r\n    /** Gets or sets a boolean indicating if the container should try to adapt to its children height */\r\n    @serialize()\r\n    public get adaptHeightToChildren(): boolean {\r\n        return this._adaptHeightToChildren;\r\n    }\r\n\r\n    public set adaptHeightToChildren(value: boolean) {\r\n        if (this._adaptHeightToChildren === value) {\r\n            return;\r\n        }\r\n\r\n        this._adaptHeightToChildren = value;\r\n\r\n        if (value) {\r\n            this.height = \"100%\";\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the container should try to adapt to its children width */\r\n    @serialize()\r\n    public get adaptWidthToChildren(): boolean {\r\n        return this._adaptWidthToChildren;\r\n    }\r\n\r\n    public set adaptWidthToChildren(value: boolean) {\r\n        if (this._adaptWidthToChildren === value) {\r\n            return;\r\n        }\r\n\r\n        this._adaptWidthToChildren = value;\r\n\r\n        if (value) {\r\n            this.width = \"100%\";\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    @serialize()\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background gradient color. Takes precedence over background */\r\n    @serialize()\r\n    public get backgroundGradient() {\r\n        return this._backgroundGradient;\r\n    }\r\n\r\n    public set backgroundGradient(value: Nullable<BaseGradient>) {\r\n        if (this._backgroundGradient === value) {\r\n            return;\r\n        }\r\n        this._backgroundGradient = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets the list of children */\r\n    public get children(): Control[] {\r\n        return this._children;\r\n    }\r\n\r\n    public override get isReadOnly() {\r\n        return this._isReadOnly;\r\n    }\r\n\r\n    public override set isReadOnly(value: boolean) {\r\n        this._isReadOnly = value;\r\n\r\n        for (const child of this._children) {\r\n            child.isReadOnly = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new Container\r\n     * @param name defines the name of the container\r\n     */\r\n    constructor(public override name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected override _getTypeName(): string {\r\n        return \"Container\";\r\n    }\r\n\r\n    public override _flagDescendantsAsMatrixDirty(): void {\r\n        for (const child of this.children) {\r\n            child._isClipped = false;\r\n            child._markMatrixAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets a child using its name\r\n     * @param name defines the child name to look for\r\n     * @returns the child control if found\r\n     */\r\n    public getChildByName(name: string): Nullable<Control> {\r\n        for (const child of this.children) {\r\n            if (child.name === name) {\r\n                return child;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets a child using its type and its name\r\n     * @param name defines the child name to look for\r\n     * @param type defines the child type to look for\r\n     * @returns the child control if found\r\n     */\r\n    public getChildByType(name: string, type: string): Nullable<Control> {\r\n        for (const child of this.children) {\r\n            if (child.typeName === type) {\r\n                return child;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Search for a specific control in children\r\n     * @param control defines the control to look for\r\n     * @returns true if the control is in child list\r\n     */\r\n    public containsControl(control: Control): boolean {\r\n        return this.children.indexOf(control) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Adds a new control to the current container\r\n     * @param control defines the control to add\r\n     * @returns the current container\r\n     */\r\n    public addControl(control: Nullable<Control>): Container {\r\n        if (!control) {\r\n            return this;\r\n        }\r\n\r\n        const index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            return this;\r\n        }\r\n        control._link(this._host);\r\n\r\n        control._markAllAsDirty();\r\n\r\n        this._reOrderControl(control);\r\n\r\n        this._markAsDirty();\r\n\r\n        this.onControlAddedObservable.notifyObservers(control);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes all controls from the current container\r\n     * @returns the current container\r\n     */\r\n    public clearControls(): Container {\r\n        const children = this.children.slice();\r\n\r\n        for (const child of children) {\r\n            this.removeControl(child);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the current container\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control): Container {\r\n        const index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            this._children.splice(index, 1);\r\n\r\n            control.parent = null;\r\n        }\r\n\r\n        control.linkWithMesh(null);\r\n\r\n        if (this._host) {\r\n            this._host._cleanControlAfterRemoval(control);\r\n        }\r\n\r\n        this._markAsDirty();\r\n\r\n        this.onControlRemovedObservable.notifyObservers(control);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * An event triggered when any control is added to this container.\r\n     */\r\n    public onControlAddedObservable = new Observable<Nullable<Control>>();\r\n\r\n    /**\r\n     * An event triggered when any control is removed from this container.\r\n     */\r\n    public onControlRemovedObservable = new Observable<Nullable<Control>>();\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _reOrderControl(control: Control): void {\r\n        const linkedMesh = control.linkedMesh;\r\n\r\n        this.removeControl(control);\r\n\r\n        let wasAdded = false;\r\n        for (let index = 0; index < this._children.length; index++) {\r\n            if (this._children[index].zIndex > control.zIndex) {\r\n                this._children.splice(index, 0, control);\r\n                wasAdded = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!wasAdded) {\r\n            this._children.push(control);\r\n        }\r\n\r\n        control.parent = this;\r\n\r\n        if (linkedMesh) {\r\n            control.linkWithMesh(linkedMesh);\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _offsetLeft(offset: number) {\r\n        super._offsetLeft(offset);\r\n\r\n        for (const child of this._children) {\r\n            child._offsetLeft(offset);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _offsetTop(offset: number) {\r\n        super._offsetTop(offset);\r\n\r\n        for (const child of this._children) {\r\n            child._offsetTop(offset);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    public override _markAllAsDirty(): void {\r\n        super._markAllAsDirty();\r\n\r\n        for (let index = 0; index < this._children.length; index++) {\r\n            this._children[index]._markAllAsDirty();\r\n        }\r\n    }\r\n\r\n    protected _getBackgroundColor(context: ICanvasRenderingContext) {\r\n        return this._backgroundGradient ? this._backgroundGradient.getCanvasGradient(context) : this._background;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected _localDraw(context: ICanvasRenderingContext): void {\r\n        if (this._background || this._backgroundGradient) {\r\n            context.save();\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX * this._host.idealRatio;\r\n                context.shadowOffsetY = this.shadowOffsetY * this._host.idealRatio;\r\n            }\r\n\r\n            context.fillStyle = this._getBackgroundColor(context);\r\n\r\n            context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            context.restore();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _link(host: AdvancedDynamicTexture): void {\r\n        super._link(host);\r\n\r\n        for (const child of this._children) {\r\n            child._link(host);\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    protected _beforeLayout() {\r\n        // Do nothing\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected override _processMeasures(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        if (this._isDirty || !this._cachedParentMeasure.isEqualsTo(parentMeasure)) {\r\n            super._processMeasures(parentMeasure, context);\r\n            this._evaluateClippingState(parentMeasure);\r\n            if (this._renderToIntermediateTexture) {\r\n                if (this._intermediateTexture && this._host.getScene() != this._intermediateTexture.getScene()) {\r\n                    this._intermediateTexture.dispose();\r\n                    this._intermediateTexture = null;\r\n                }\r\n                if (!this._intermediateTexture) {\r\n                    this._intermediateTexture = new DynamicTexture(\r\n                        \"\",\r\n                        { width: this._currentMeasure.width, height: this._currentMeasure.height },\r\n                        this._host.getScene(),\r\n                        false,\r\n                        Texture.NEAREST_SAMPLINGMODE,\r\n                        Constants.TEXTUREFORMAT_RGBA,\r\n                        false\r\n                    );\r\n                    this._intermediateTexture.hasAlpha = true;\r\n                } else {\r\n                    this._intermediateTexture.scaleTo(this._currentMeasure.width, this._currentMeasure.height);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _layout(parentMeasure: Measure, context: ICanvasRenderingContext): boolean {\r\n        if (!this.isDirty && (!this.isVisible || this.notRenderable)) {\r\n            return false;\r\n        }\r\n\r\n        this.host._numLayoutCalls++;\r\n\r\n        if (this._isDirty) {\r\n            this._currentMeasure.transformToRef(this._transformMatrix, this._prevCurrentMeasureTransformedIntoGlobalSpace);\r\n        }\r\n\r\n        let rebuildCount = 0;\r\n\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        this._beforeLayout();\r\n\r\n        do {\r\n            let computedWidth = -1;\r\n            let computedHeight = -1;\r\n            this._rebuildLayout = false;\r\n            this._processMeasures(parentMeasure, context);\r\n\r\n            if (!this._isClipped) {\r\n                for (const child of this._children) {\r\n                    child._tempParentMeasure.copyFrom(this._measureForChildren);\r\n\r\n                    if (child._layout(this._measureForChildren, context)) {\r\n                        if (child.isVisible && !child.notRenderable) {\r\n                            if (this.adaptWidthToChildren && child._width.isPixel) {\r\n                                computedWidth = Math.max(computedWidth, child._currentMeasure.width + child._paddingLeftInPixels + child._paddingRightInPixels);\r\n                            }\r\n                            if (this.adaptHeightToChildren && child._height.isPixel) {\r\n                                computedHeight = Math.max(computedHeight, child._currentMeasure.height + child._paddingTopInPixels + child._paddingBottomInPixels);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (this.adaptWidthToChildren && computedWidth >= 0) {\r\n                    computedWidth += this.paddingLeftInPixels + this.paddingRightInPixels;\r\n                    const width = computedWidth + \"px\";\r\n                    if (this.width !== width) {\r\n                        this.parent?._markAsDirty();\r\n                        this.width = width;\r\n                        this._width.ignoreAdaptiveScaling = true;\r\n                        this._rebuildLayout = true;\r\n                    }\r\n                }\r\n                if (this.adaptHeightToChildren && computedHeight >= 0) {\r\n                    computedHeight += this.paddingTopInPixels + this.paddingBottomInPixels;\r\n                    const height = computedHeight + \"px\";\r\n                    if (this.height !== height) {\r\n                        this.parent?._markAsDirty();\r\n                        this.height = height;\r\n                        this._height.ignoreAdaptiveScaling = true;\r\n                        this._rebuildLayout = true;\r\n                    }\r\n                }\r\n\r\n                this._postMeasure();\r\n            }\r\n            rebuildCount++;\r\n        } while (this._rebuildLayout && rebuildCount < this.maxLayoutCycle);\r\n\r\n        if (rebuildCount >= 3 && this.logLayoutCycleErrors) {\r\n            Logger.Error(`Layout cycle detected in GUI (Container name=${this.name}, uniqueId=${this.uniqueId})`);\r\n        }\r\n\r\n        context.restore();\r\n\r\n        if (this._isDirty) {\r\n            this.invalidateRect();\r\n\r\n            this._isDirty = false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    protected override _postMeasure() {\r\n        // Do nothing by default\r\n    }\r\n\r\n    private _inverseTransformMatrix = Matrix2D.Identity();\r\n    private _inverseMeasure = new Measure(0, 0, 0, 0);\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _draw(context: ICanvasRenderingContext, invalidatedRectangle?: Measure): void {\r\n        const renderToIntermediateTextureThisDraw = this._renderToIntermediateTexture && this._intermediateTexture;\r\n        const contextToDrawTo = renderToIntermediateTextureThisDraw ? (<DynamicTexture>this._intermediateTexture).getContext() : context;\r\n\r\n        if (renderToIntermediateTextureThisDraw) {\r\n            contextToDrawTo.save();\r\n            contextToDrawTo.translate(-this._currentMeasure.left, -this._currentMeasure.top);\r\n            if (invalidatedRectangle) {\r\n                this._transformMatrix.invertToRef(this._inverseTransformMatrix);\r\n                invalidatedRectangle.transformToRef(this._inverseTransformMatrix, this._inverseMeasure);\r\n                contextToDrawTo.clearRect(this._inverseMeasure.left, this._inverseMeasure.top, this._inverseMeasure.width, this._inverseMeasure.height);\r\n            } else {\r\n                contextToDrawTo.clearRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n        }\r\n\r\n        this._localDraw(contextToDrawTo);\r\n\r\n        context.save();\r\n\r\n        if (this.clipChildren) {\r\n            this._clipForChildren(contextToDrawTo);\r\n        }\r\n\r\n        for (const child of this._children) {\r\n            // Only redraw parts of the screen that are invalidated\r\n            if (invalidatedRectangle) {\r\n                if (!child._intersectsRect(invalidatedRectangle)) {\r\n                    continue;\r\n                }\r\n            }\r\n            child._render(contextToDrawTo, invalidatedRectangle);\r\n        }\r\n\r\n        if (renderToIntermediateTextureThisDraw) {\r\n            contextToDrawTo.restore();\r\n            context.save();\r\n            context.globalAlpha = this.alpha;\r\n            context.drawImage(contextToDrawTo.canvas, this._currentMeasure.left, this._currentMeasure.top);\r\n            context.restore();\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    public override getDescendantsToRef(results: Control[], directDescendantsOnly: boolean = false, predicate?: (control: Control) => boolean): void {\r\n        if (!this.children) {\r\n            return;\r\n        }\r\n\r\n        for (let index = 0; index < this.children.length; index++) {\r\n            const item = this.children[index];\r\n\r\n            if (!predicate || predicate(item)) {\r\n                results.push(item);\r\n            }\r\n\r\n            if (!directDescendantsOnly) {\r\n                item.getDescendantsToRef(results, false, predicate);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _processPicking(\r\n        x: number,\r\n        y: number,\r\n        pi: Nullable<PointerInfoBase>,\r\n        type: number,\r\n        pointerId: number,\r\n        buttonIndex: number,\r\n        deltaX?: number,\r\n        deltaY?: number\r\n    ): boolean {\r\n        if (!this._isEnabled || !this.isVisible || this.notRenderable) {\r\n            return false;\r\n        }\r\n\r\n        // checks if the picking position is within the container\r\n        const contains = super.contains(x, y);\r\n\r\n        // if clipChildren is off, we should still pass picking events to children even if we don't contain the pointer\r\n        if (!contains && this.clipChildren) {\r\n            return false;\r\n        }\r\n\r\n        if (this.delegatePickingToChildren) {\r\n            let contains = false;\r\n            for (let index = this._children.length - 1; index >= 0; index--) {\r\n                const child = this._children[index];\r\n                if (child.isEnabled && child.isHitTestVisible && child.isVisible && !child.notRenderable && child.contains(x, y)) {\r\n                    contains = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!contains) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // Checking backwards to pick closest first\r\n        for (let index = this._children.length - 1; index >= 0; index--) {\r\n            const child = this._children[index];\r\n            if (child._processPicking(x, y, pi, type, pointerId, buttonIndex, deltaX, deltaY)) {\r\n                if (child.hoverCursor) {\r\n                    this._host._changeCursor(child.hoverCursor);\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!contains) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.isHitTestVisible) {\r\n            return false;\r\n        }\r\n\r\n        return this._processObservables(type, x, y, pi, pointerId, buttonIndex, deltaX, deltaY);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    protected override _additionalProcessing(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.copyFrom(this._currentMeasure);\r\n    }\r\n\r\n    protected _getAdaptDimTo(dim: \"width\" | \"height\"): boolean {\r\n        if (dim === \"width\") {\r\n            return this.adaptWidthToChildren;\r\n        } else {\r\n            return this.adaptHeightToChildren;\r\n        }\r\n    }\r\n\r\n    public override isDimensionFullyDefined(dim: \"width\" | \"height\"): boolean {\r\n        if (this._getAdaptDimTo(dim)) {\r\n            for (const child of this.children) {\r\n                if (!child.isDimensionFullyDefined(dim)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return super.isDimensionFullyDefined(dim);\r\n    }\r\n\r\n    /**\r\n     * Serializes the current control\r\n     * @param serializationObject defined the JSON serialized object\r\n     * @param force force serialization even if isSerializable === false\r\n     * @param allowCanvas defines if the control is allowed to use a Canvas2D object to serialize (true by default)\r\n     */\r\n    public override serialize(serializationObject: any, force: boolean = false, allowCanvas: boolean = true) {\r\n        super.serialize(serializationObject, force, allowCanvas);\r\n        if (!this.isSerializable && !force) {\r\n            return;\r\n        }\r\n\r\n        if (this.backgroundGradient) {\r\n            serializationObject.backgroundGradient = {};\r\n            this.backgroundGradient.serialize(serializationObject.backgroundGradient);\r\n        }\r\n\r\n        if (!this.children.length) {\r\n            return;\r\n        }\r\n\r\n        serializationObject.children = [];\r\n\r\n        for (const child of this.children) {\r\n            if (child.isSerializable || force) {\r\n                const childSerializationObject = {};\r\n                child.serialize(childSerializationObject, force, allowCanvas);\r\n                serializationObject.children.push(childSerializationObject);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public override dispose() {\r\n        super.dispose();\r\n\r\n        for (let index = this.children.length - 1; index >= 0; index--) {\r\n            this.children[index].dispose();\r\n        }\r\n        this._intermediateTexture?.dispose();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _parseFromContent(serializedObject: any, host: AdvancedDynamicTexture, urlRewriter?: (url: string) => string) {\r\n        super._parseFromContent(serializedObject, host, urlRewriter);\r\n        this._link(host);\r\n\r\n        // Gradient\r\n        if (serializedObject.backgroundGradient) {\r\n            const className = Tools.Instantiate(\"BABYLON.GUI.\" + serializedObject.backgroundGradient.className);\r\n            this._backgroundGradient = new className();\r\n            this._backgroundGradient?.parse(serializedObject.backgroundGradient);\r\n        }\r\n\r\n        if (!serializedObject.children) {\r\n            return;\r\n        }\r\n\r\n        for (const childData of serializedObject.children) {\r\n            this.addControl(Control.Parse(childData, host, urlRewriter));\r\n        }\r\n    }\r\n\r\n    public override isReady(): boolean {\r\n        for (const child of this.children) {\r\n            if (!child.isReady()) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Container\", Container);\r\n"],
  "mappings": "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",
  "names": ["contains"]
}
