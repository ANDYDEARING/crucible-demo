{
  "version": 3,
  "sources": ["../../../dev/gui/src/2D/controls/rectangle.ts", "../../../dev/gui/src/2D/controls/image.ts", "../../../dev/gui/src/2D/controls/button.ts"],
  "sourcesContent": ["import { Container } from \"./container\";\r\nimport type { Measure } from \"../measure\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/** Class used to create rectangle container */\r\nexport class Rectangle extends Container {\r\n    private _thickness = 1;\r\n    private _cornerRadius = [0, 0, 0, 0];\r\n    private _cachedRadius = [0, 0, 0, 0];\r\n\r\n    /** Gets or sets border thickness */\r\n    @serialize()\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the corner radius of all angles */\r\n    @serialize()\r\n    public get cornerRadius(): number {\r\n        return this._cornerRadius[0];\r\n    }\r\n\r\n    public set cornerRadius(value: number) {\r\n        if (value < 0) {\r\n            value = 0;\r\n        }\r\n\r\n        if (this._cornerRadius[0] === value && this._cornerRadius[1] === value && this._cornerRadius[2] === value && this._cornerRadius[3] === value) {\r\n            return;\r\n        }\r\n\r\n        this._cornerRadius[0] = this._cornerRadius[1] = this._cornerRadius[2] = this._cornerRadius[3] = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the corner radius top left angle */\r\n    @serialize()\r\n    public get cornerRadiusX(): number {\r\n        return this._cornerRadius[0];\r\n    }\r\n\r\n    public set cornerRadiusX(value: number) {\r\n        if (this._cornerRadius[0] === value) {\r\n            return;\r\n        }\r\n        this._cornerRadius[0] = value;\r\n    }\r\n\r\n    /** Gets or sets the corner radius top right angle */\r\n    @serialize()\r\n    public get cornerRadiusY(): number {\r\n        return this._cornerRadius[1];\r\n    }\r\n\r\n    public set cornerRadiusY(value: number) {\r\n        if (this._cornerRadius[1] === value) {\r\n            return;\r\n        }\r\n        this._cornerRadius[1] = value;\r\n    }\r\n\r\n    /** Gets or sets the corner radius bottom left angle */\r\n    @serialize()\r\n    public get cornerRadiusZ(): number {\r\n        return this._cornerRadius[2];\r\n    }\r\n\r\n    public set cornerRadiusZ(value: number) {\r\n        if (this._cornerRadius[2] === value) {\r\n            return;\r\n        }\r\n        this._cornerRadius[2] = value;\r\n    }\r\n\r\n    /** Gets or sets the corner radius bottom right angle */\r\n    @serialize()\r\n    public get cornerRadiusW(): number {\r\n        return this._cornerRadius[3];\r\n    }\r\n\r\n    public set cornerRadiusW(value: number) {\r\n        if (this._cornerRadius[3] === value) {\r\n            return;\r\n        }\r\n        this._cornerRadius[3] = value;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Rectangle\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public override name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected override _getTypeName(): string {\r\n        return \"Rectangle\";\r\n    }\r\n\r\n    /** @internal */\r\n    protected override _computeAdditionalOffsetX() {\r\n        let additionalWidth = 0;\r\n        if (this._cornerRadius[0] !== 0 || this._cornerRadius[1] !== 0 || this._cornerRadius[2] !== 0 || this._cornerRadius[3] !== 0) {\r\n            // Take in account the aliasing\r\n            additionalWidth += 1;\r\n        }\r\n        if (this.thickness) {\r\n            additionalWidth += this.thickness / 2;\r\n        }\r\n        return additionalWidth;\r\n    }\r\n\r\n    /** @internal */\r\n    protected override _computeAdditionalOffsetY() {\r\n        let additionalHeight = 0;\r\n        if (this._cornerRadius[0] !== 0 || this._cornerRadius[1] !== 0 || this._cornerRadius[2] !== 0 || this._cornerRadius[3] !== 0) {\r\n            // Take in account the aliasing\r\n            additionalHeight += 1;\r\n        }\r\n        if (this.thickness) {\r\n            additionalHeight += this.thickness / 2;\r\n        }\r\n        return additionalHeight;\r\n    }\r\n\r\n    protected _getRectangleFill(context: ICanvasRenderingContext) {\r\n        return this._getBackgroundColor(context);\r\n    }\r\n\r\n    protected override _localDraw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX * this._host.idealRatio;\r\n            context.shadowOffsetY = this.shadowOffsetY * this._host.idealRatio;\r\n        }\r\n\r\n        if (this._background || this._backgroundGradient) {\r\n            context.fillStyle = this._getRectangleFill(context);\r\n\r\n            if (this._cornerRadius[0] !== 0 || this._cornerRadius[1] !== 0 || this._cornerRadius[2] !== 0 || this._cornerRadius[3] !== 0) {\r\n                this._drawRoundedRect(context, this._thickness / 2);\r\n                context.fill();\r\n            } else {\r\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n        }\r\n\r\n        if (this._thickness) {\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n\r\n            if (this.color || this.gradient) {\r\n                context.strokeStyle = this.gradient ? this.gradient.getCanvasGradient(context) : this.color;\r\n            }\r\n            context.lineWidth = this._thickness;\r\n\r\n            if (this._cornerRadius[0] !== 0 || this._cornerRadius[1] !== 0 || this._cornerRadius[2] !== 0 || this._cornerRadius[3] !== 0) {\r\n                this._drawRoundedRect(context, this._thickness / 2);\r\n                context.stroke();\r\n            } else {\r\n                context.strokeRect(\r\n                    this._currentMeasure.left + this._thickness / 2,\r\n                    this._currentMeasure.top + this._thickness / 2,\r\n                    this._currentMeasure.width - this._thickness,\r\n                    this._currentMeasure.height - this._thickness\r\n                );\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected override _additionalProcessing(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.width -= 2 * this._thickness;\r\n        this._measureForChildren.height -= 2 * this._thickness;\r\n        this._measureForChildren.left += this._thickness;\r\n        this._measureForChildren.top += this._thickness;\r\n    }\r\n\r\n    private _drawRoundedRect(context: ICanvasRenderingContext, offset: number = 0): void {\r\n        const x = this._currentMeasure.left + offset;\r\n        const y = this._currentMeasure.top + offset;\r\n        const width = this._currentMeasure.width - offset * 2;\r\n        const height = this._currentMeasure.height - offset * 2;\r\n\r\n        for (let index = 0; index < this._cornerRadius.length; index++) {\r\n            this._cachedRadius[index] = Math.abs(Math.min(height / 2, Math.min(width / 2, this._cornerRadius[index])));\r\n        }\r\n\r\n        context.beginPath();\r\n        context.moveTo(x + this._cachedRadius[0], y);\r\n        context.lineTo(x + width - this._cachedRadius[1], y);\r\n        context.arc(x + width - this._cachedRadius[1], y + this._cachedRadius[1], this._cachedRadius[1], (3 * Math.PI) / 2, Math.PI * 2);\r\n        context.lineTo(x + width, y + height - this._cachedRadius[2]);\r\n        context.arc(x + width - this._cachedRadius[2], y + height - this._cachedRadius[2], this._cachedRadius[2], 0, Math.PI / 2);\r\n        context.lineTo(x + this._cachedRadius[3], y + height);\r\n        context.arc(x + this._cachedRadius[3], y + height - this._cachedRadius[3], this._cachedRadius[3], Math.PI / 2, Math.PI);\r\n        context.lineTo(x, y + this._cachedRadius[0]);\r\n        context.arc(x + this._cachedRadius[0], y + this._cachedRadius[0], this._cachedRadius[0], Math.PI, (3 * Math.PI) / 2);\r\n        context.closePath();\r\n    }\r\n\r\n    protected override _clipForChildren(context: ICanvasRenderingContext) {\r\n        if (this._cornerRadius[0] !== 0 || this._cornerRadius[1] !== 0 || this._cornerRadius[2] !== 0 || this._cornerRadius[3] !== 0) {\r\n            this._drawRoundedRect(context, this._thickness);\r\n            context.clip();\r\n        }\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Rectangle\", Rectangle);\r\n", "import type { Nullable } from \"core/types\";\r\nimport { Observable } from \"core/Misc/observable\";\r\nimport { Tools } from \"core/Misc/tools\";\r\n\r\nimport { Control } from \"./control\";\r\nimport type { Measure } from \"../measure\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport { serialize } from \"core/Misc/decorators\";\r\nimport type { ICanvas, ICanvasRenderingContext, IImage } from \"core/Engines/ICanvas\";\r\nimport { EngineStore } from \"core/Engines/engineStore\";\r\n\r\n/**\r\n * Class used to create 2D images\r\n */\r\nexport class Image extends Control {\r\n    /**\r\n     *  Specifies an alternate text for the image, if the image for some reason cannot be displayed.\r\n     */\r\n    public alt?: string;\r\n\r\n    private _workingCanvas: Nullable<ICanvas> = null;\r\n\r\n    private _domImage: IImage;\r\n    private _imageWidth: number;\r\n    private _imageHeight: number;\r\n    private _loaded = false;\r\n    private _stretch = Image.STRETCH_FILL;\r\n    private _source: Nullable<string> = null;\r\n    private _autoScale = false;\r\n\r\n    private _sourceLeft = 0;\r\n    private _sourceTop = 0;\r\n    private _sourceWidth = 0;\r\n    private _sourceHeight = 0;\r\n    private _svgAttributesComputationCompleted: boolean = false;\r\n    private _isSVG: boolean = false;\r\n\r\n    private _cellWidth: number = 0;\r\n    private _cellHeight: number = 0;\r\n    private _cellId: number = -1;\r\n\r\n    private _sliceLeft: number;\r\n    private _sliceRight: number;\r\n    private _sliceTop: number;\r\n    private _sliceBottom: number;\r\n\r\n    private _populateNinePatchSlicesFromImage = false;\r\n\r\n    private _detectPointerOnOpaqueOnly: boolean;\r\n\r\n    private _imageDataCache: {\r\n        data: Uint8ClampedArray | null;\r\n        key: string;\r\n    } = { data: null, key: \"\" };\r\n\r\n    /**\r\n     * Cache of images to avoid loading the same image multiple times\r\n     */\r\n    public static SourceImgCache = new Map<string, { img: IImage; timesUsed: number; loaded: boolean; waitingForLoadCallback: Array<() => void> }>();\r\n\r\n    /**\r\n     * Observable notified when the content is loaded\r\n     */\r\n    public onImageLoadedObservable = new Observable<Image>();\r\n\r\n    /**\r\n     * Observable notified when _sourceLeft, _sourceTop, _sourceWidth and _sourceHeight are computed\r\n     */\r\n    public onSVGAttributesComputedObservable = new Observable<Image>();\r\n\r\n    /**\r\n     * Gets or sets the referrer policy to apply on the img element load request.\r\n     * You should set referrerPolicy before set the source of the image if you want to ensure the header will be present on the xhr loading request\r\n     */\r\n    public referrerPolicy: Nullable<ReferrerPolicy>;\r\n\r\n    /**\r\n     * Gets a boolean indicating that the content is loaded\r\n     */\r\n    public get isLoaded(): boolean {\r\n        return this._loaded;\r\n    }\r\n\r\n    public override isReady(): boolean {\r\n        return this.isLoaded;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if pointers should only be validated on pixels with alpha > 0.\r\n     * Beware using this as this will consume more memory as the image has to be stored twice\r\n     */\r\n    @serialize()\r\n    public get detectPointerOnOpaqueOnly(): boolean {\r\n        return this._detectPointerOnOpaqueOnly;\r\n    }\r\n\r\n    public set detectPointerOnOpaqueOnly(value: boolean) {\r\n        if (this._detectPointerOnOpaqueOnly === value) {\r\n            return;\r\n        }\r\n\r\n        this._detectPointerOnOpaqueOnly = value;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the left value for slicing (9-patch)\r\n     */\r\n    @serialize()\r\n    public get sliceLeft(): number {\r\n        return this._sliceLeft;\r\n    }\r\n\r\n    public set sliceLeft(value: number) {\r\n        if (this._sliceLeft === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceLeft = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the right value for slicing (9-patch)\r\n     */\r\n    @serialize()\r\n    public get sliceRight(): number {\r\n        return this._sliceRight;\r\n    }\r\n\r\n    public set sliceRight(value: number) {\r\n        if (this._sliceRight === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceRight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the top value for slicing (9-patch)\r\n     */\r\n    @serialize()\r\n    public get sliceTop(): number {\r\n        return this._sliceTop;\r\n    }\r\n\r\n    public set sliceTop(value: number) {\r\n        if (this._sliceTop === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceTop = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the bottom value for slicing (9-patch)\r\n     */\r\n    @serialize()\r\n    public get sliceBottom(): number {\r\n        return this._sliceBottom;\r\n    }\r\n\r\n    public set sliceBottom(value: number) {\r\n        if (this._sliceBottom === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceBottom = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the left coordinate in the source image\r\n     */\r\n    @serialize()\r\n    public get sourceLeft(): number {\r\n        return this._sourceLeft;\r\n    }\r\n\r\n    public set sourceLeft(value: number) {\r\n        if (this._sourceLeft === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceLeft = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the top coordinate in the source image\r\n     */\r\n    @serialize()\r\n    public get sourceTop(): number {\r\n        return this._sourceTop;\r\n    }\r\n\r\n    public set sourceTop(value: number) {\r\n        if (this._sourceTop === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceTop = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the width to capture in the source image\r\n     */\r\n    @serialize()\r\n    public get sourceWidth(): number {\r\n        return this._sourceWidth;\r\n    }\r\n\r\n    public set sourceWidth(value: number) {\r\n        if (this._sourceWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceWidth = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the height to capture in the source image\r\n     */\r\n    @serialize()\r\n    public get sourceHeight(): number {\r\n        return this._sourceHeight;\r\n    }\r\n\r\n    public set sourceHeight(value: number) {\r\n        if (this._sourceHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets the image width\r\n     */\r\n    public get imageWidth(): number {\r\n        return this._imageWidth;\r\n    }\r\n\r\n    /**\r\n     * Gets the image height\r\n     */\r\n    public get imageHeight(): number {\r\n        return this._imageHeight;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if nine patch slices (left, top, right, bottom) should be read from image data\r\n     */\r\n    @serialize()\r\n    public get populateNinePatchSlicesFromImage(): boolean {\r\n        return this._populateNinePatchSlicesFromImage;\r\n    }\r\n\r\n    public set populateNinePatchSlicesFromImage(value: boolean) {\r\n        if (this._populateNinePatchSlicesFromImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._populateNinePatchSlicesFromImage = value;\r\n\r\n        if (this._populateNinePatchSlicesFromImage && this._loaded) {\r\n            this._extractNinePatchSliceDataFromImage();\r\n        }\r\n    }\r\n\r\n    /** Indicates if the format of the image is SVG */\r\n    public get isSVG(): boolean {\r\n        return this._isSVG;\r\n    }\r\n\r\n    /** Gets the status of the SVG attributes computation (sourceLeft, sourceTop, sourceWidth, sourceHeight) */\r\n    public get svgAttributesComputationCompleted(): boolean {\r\n        return this._svgAttributesComputationCompleted;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the image can force its container to adapt its size\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#image\r\n     */\r\n    @serialize()\r\n    public get autoScale(): boolean {\r\n        return this._autoScale;\r\n    }\r\n\r\n    public set autoScale(value: boolean) {\r\n        if (this._autoScale === value) {\r\n            return;\r\n        }\r\n\r\n        this._autoScale = value;\r\n\r\n        if (value && this._loaded) {\r\n            this.synchronizeSizeWithContent();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the stretching mode used by the image */\r\n    @serialize()\r\n    public get stretch(): number {\r\n        return this._stretch;\r\n    }\r\n\r\n    public set stretch(value: number) {\r\n        if (this._stretch === value) {\r\n            return;\r\n        }\r\n\r\n        this._stretch = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public _rotate90(n: number, preserveProperties: boolean = false): Image {\r\n        const width = this._domImage.width;\r\n        const height = this._domImage.height;\r\n\r\n        // Should abstract platform instead of using LastCreatedEngine\r\n        const engine = this._host?.getScene()?.getEngine() || EngineStore.LastCreatedEngine;\r\n        if (!engine) {\r\n            throw new Error(\"Invalid engine. Unable to create a canvas.\");\r\n        }\r\n        const canvas = engine.createCanvas(height, width);\r\n\r\n        const context = canvas.getContext(\"2d\");\r\n\r\n        context.translate(canvas.width / 2, canvas.height / 2);\r\n        context.rotate((n * Math.PI) / 2);\r\n\r\n        context.drawImage(this._domImage, 0, 0, width, height, -width / 2, -height / 2, width, height);\r\n\r\n        const dataUrl: string = canvas.toDataURL(\"image/jpg\");\r\n        const rotatedImage = new Image(this.name + \"rotated\", dataUrl);\r\n\r\n        if (preserveProperties) {\r\n            rotatedImage._stretch = this._stretch;\r\n            rotatedImage._autoScale = this._autoScale;\r\n            rotatedImage._cellId = this._cellId;\r\n            rotatedImage._cellWidth = n % 1 ? this._cellHeight : this._cellWidth;\r\n            rotatedImage._cellHeight = n % 1 ? this._cellWidth : this._cellHeight;\r\n        }\r\n\r\n        this._handleRotationForSVGImage(this, rotatedImage, n);\r\n\r\n        this._imageDataCache.data = null;\r\n\r\n        return rotatedImage;\r\n    }\r\n\r\n    private _handleRotationForSVGImage(srcImage: Image, dstImage: Image, n: number): void {\r\n        if (!srcImage._isSVG) {\r\n            return;\r\n        }\r\n\r\n        if (srcImage._svgAttributesComputationCompleted) {\r\n            this._rotate90SourceProperties(srcImage, dstImage, n);\r\n            this._markAsDirty();\r\n        } else {\r\n            srcImage.onSVGAttributesComputedObservable.addOnce(() => {\r\n                this._rotate90SourceProperties(srcImage, dstImage, n);\r\n                this._markAsDirty();\r\n            });\r\n        }\r\n    }\r\n\r\n    private _rotate90SourceProperties(srcImage: Image, dstImage: Image, n: number): void {\r\n        let srcLeft = srcImage.sourceLeft,\r\n            srcTop = srcImage.sourceTop,\r\n            srcWidth = srcImage.domImage.width,\r\n            srcHeight = srcImage.domImage.height;\r\n\r\n        let dstLeft = srcLeft,\r\n            dstTop = srcTop,\r\n            dstWidth = srcImage.sourceWidth,\r\n            dstHeight = srcImage.sourceHeight;\r\n\r\n        if (n != 0) {\r\n            const mult = n < 0 ? -1 : 1;\r\n            n = n % 4;\r\n            for (let i = 0; i < Math.abs(n); ++i) {\r\n                dstLeft = -(srcTop - srcHeight / 2) * mult + srcHeight / 2;\r\n                dstTop = (srcLeft - srcWidth / 2) * mult + srcWidth / 2;\r\n                [dstWidth, dstHeight] = [dstHeight, dstWidth];\r\n                if (n < 0) {\r\n                    dstTop -= dstHeight;\r\n                } else {\r\n                    dstLeft -= dstWidth;\r\n                }\r\n                srcLeft = dstLeft;\r\n                srcTop = dstTop;\r\n                [srcWidth, srcHeight] = [srcHeight, srcWidth];\r\n            }\r\n        }\r\n\r\n        dstImage.sourceLeft = dstLeft;\r\n        dstImage.sourceTop = dstTop;\r\n        dstImage.sourceWidth = dstWidth;\r\n        dstImage.sourceHeight = dstHeight;\r\n    }\r\n\r\n    private _extractNinePatchSliceDataFromImage() {\r\n        const width = this._domImage.width;\r\n        const height = this._domImage.height;\r\n\r\n        if (!this._workingCanvas) {\r\n            const engine = this._host?.getScene()?.getEngine() || EngineStore.LastCreatedEngine;\r\n            if (!engine) {\r\n                throw new Error(\"Invalid engine. Unable to create a canvas.\");\r\n            }\r\n            this._workingCanvas = engine.createCanvas(width, height);\r\n        }\r\n        const canvas = this._workingCanvas;\r\n        const context = canvas.getContext(\"2d\");\r\n\r\n        context.drawImage(this._domImage, 0, 0, width, height);\r\n        const imageData = context.getImageData(0, 0, width, height);\r\n\r\n        // Left and right\r\n        this._sliceLeft = -1;\r\n        this._sliceRight = -1;\r\n        for (let x = 0; x < width; x++) {\r\n            const alpha = imageData.data[x * 4 + 3];\r\n\r\n            if (alpha > 127 && this._sliceLeft === -1) {\r\n                this._sliceLeft = x;\r\n                continue;\r\n            }\r\n\r\n            if (alpha < 127 && this._sliceLeft > -1) {\r\n                this._sliceRight = x;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // top and bottom\r\n        this._sliceTop = -1;\r\n        this._sliceBottom = -1;\r\n        for (let y = 0; y < height; y++) {\r\n            const alpha = imageData.data[y * width * 4 + 3];\r\n\r\n            if (alpha > 127 && this._sliceTop === -1) {\r\n                this._sliceTop = y;\r\n                continue;\r\n            }\r\n\r\n            if (alpha < 127 && this._sliceTop > -1) {\r\n                this._sliceBottom = y;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the internal DOM image used to render the control\r\n     */\r\n    public set domImage(value: IImage) {\r\n        this._domImage = value;\r\n        this._loaded = false;\r\n        this._imageDataCache.data = null;\r\n\r\n        if (this._domImage.width) {\r\n            this._onImageLoaded();\r\n        } else {\r\n            this._domImage.onload = () => {\r\n                this._onImageLoaded();\r\n            };\r\n        }\r\n    }\r\n\r\n    public get domImage(): IImage {\r\n        return this._domImage;\r\n    }\r\n\r\n    private _onImageLoaded(): void {\r\n        this._imageDataCache.data = null;\r\n        this._imageWidth = this._domImage.width;\r\n        this._imageHeight = this._domImage.height;\r\n        this._loaded = true;\r\n\r\n        if (this._populateNinePatchSlicesFromImage) {\r\n            this._extractNinePatchSliceDataFromImage();\r\n        }\r\n\r\n        if (this._autoScale) {\r\n            this.synchronizeSizeWithContent();\r\n        }\r\n\r\n        this.onImageLoadedObservable.notifyObservers(this);\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets the image source url\r\n     */\r\n    @serialize()\r\n    public get source() {\r\n        return this._source;\r\n    }\r\n\r\n    /**\r\n     * Resets the internal Image Element cache. Can reduce memory usage.\r\n     */\r\n    public static ResetImageCache() {\r\n        Image.SourceImgCache.clear();\r\n    }\r\n\r\n    private _removeCacheUsage(source: Nullable<string>) {\r\n        const value = source && Image.SourceImgCache.get(source);\r\n        if (value) {\r\n            value.timesUsed -= 1;\r\n\r\n            // Remove from DOM\r\n            const htmlElement = value.img as HTMLImageElement;\r\n            if (htmlElement.parentNode) {\r\n                htmlElement.parentNode.removeChild(htmlElement);\r\n            }\r\n\r\n            // Since the image isn't being used anymore, we can clean it from the cache\r\n            if (value.timesUsed === 0) {\r\n                Image.SourceImgCache.delete(source);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets image source url\r\n     */\r\n    public set source(value: Nullable<string>) {\r\n        if (this._urlRewriter && value) {\r\n            value = this._urlRewriter(value);\r\n        }\r\n\r\n        if (this._source === value) {\r\n            return;\r\n        }\r\n\r\n        this._removeCacheUsage(this._source);\r\n\r\n        this._loaded = false;\r\n        this._source = value;\r\n        this._imageDataCache.data = null;\r\n\r\n        if (value) {\r\n            value = this._svgCheck(value);\r\n        }\r\n\r\n        // Should abstract platform instead of using LastCreatedEngine\r\n        const engine = this._host?.getScene()?.getEngine() || EngineStore.LastCreatedEngine;\r\n        // If no engine, skip all other DOM operations.\r\n        if (!engine) {\r\n            return;\r\n        }\r\n        if (value && Image.SourceImgCache.has(value)) {\r\n            const cachedData = Image.SourceImgCache.get(value)!;\r\n            this._domImage = cachedData.img;\r\n            cachedData.timesUsed += 1;\r\n            if (cachedData.loaded) {\r\n                this._onImageLoaded();\r\n            } else {\r\n                cachedData.waitingForLoadCallback.push(this._onImageLoaded.bind(this));\r\n            }\r\n            return;\r\n        }\r\n        this._domImage = engine.createCanvasImage();\r\n        // need to add to enforce rendering\r\n        const imgElement = this._domImage as HTMLImageElement;\r\n        let addedToDom = false;\r\n        if (imgElement.style && this._source?.endsWith(\".svg\")) {\r\n            imgElement.style.visibility = \"hidden\";\r\n            imgElement.style.position = \"absolute\";\r\n            imgElement.style.top = \"0\";\r\n            engine.getRenderingCanvas()?.parentNode?.appendChild(imgElement);\r\n            addedToDom = true;\r\n        }\r\n\r\n        if (value) {\r\n            Image.SourceImgCache.set(value, { img: this._domImage, timesUsed: 1, loaded: false, waitingForLoadCallback: [this._onImageLoaded.bind(this)] });\r\n        }\r\n\r\n        this._domImage.onload = () => {\r\n            if (value) {\r\n                const cachedData = Image.SourceImgCache.get(value);\r\n                if (cachedData) {\r\n                    cachedData.loaded = true;\r\n                    for (const waitingCallback of cachedData.waitingForLoadCallback) {\r\n                        waitingCallback();\r\n                    }\r\n                    cachedData.waitingForLoadCallback.length = 0;\r\n                    addedToDom && imgElement.remove();\r\n                    return;\r\n                }\r\n            }\r\n            this._onImageLoaded();\r\n            addedToDom && imgElement.remove();\r\n        };\r\n        if (value) {\r\n            Tools.SetCorsBehavior(value, this._domImage);\r\n            Tools.SetReferrerPolicyBehavior(this.referrerPolicy, this._domImage);\r\n            this._domImage.src = value;\r\n        }\r\n    }\r\n\r\n    private _sanitizeSVG(svgString: string) {\r\n        if (svgString.indexOf(\"<svg\") === -1) {\r\n            return svgString; // Not an SVG, return as is\r\n        }\r\n\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(svgString, \"image/svg+xml\");\r\n\r\n        const dangerousTags = [\"script\", \"iframe\", \"foreignObject\", \"object\", \"embed\", \"link\", \"style\"];\r\n        const dangerousAttrs = [/^on/i, /^xlink:href$/, /^href$/];\r\n\r\n        // Remove dangerous elements\r\n        dangerousTags.forEach((tag) => {\r\n            const elements = doc.getElementsByTagName(tag);\r\n            for (let i = elements.length - 1; i >= 0; i--) {\r\n                elements[i].remove();\r\n            }\r\n        });\r\n\r\n        // Recursively sanitize attributes\r\n        function sanitizeElement(el: Element) {\r\n            if (el.attributes) {\r\n                for (let i = el.attributes.length - 1; i >= 0; i--) {\r\n                    const attr = el.attributes[i];\r\n                    const name = attr.name;\r\n                    const value = attr.value;\r\n\r\n                    // Remove dangerous attributes\r\n                    if (dangerousAttrs.some((regex) => regex.test(name))) {\r\n                        el.removeAttribute(name);\r\n                    }\r\n\r\n                    // Remove javascript: links\r\n                    if (typeof value === \"string\" && value.trim().toLowerCase().startsWith(\"javascript:\")) {\r\n                        el.removeAttribute(name);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Recursively sanitize children\r\n            for (let i = 0; i < el.children.length; i++) {\r\n                sanitizeElement(el.children[i]);\r\n            }\r\n        }\r\n\r\n        sanitizeElement(doc.documentElement);\r\n\r\n        return new XMLSerializer().serializeToString(doc);\r\n    }\r\n\r\n    /**\r\n     * Checks for svg document with icon id present\r\n     * @param value the source svg\r\n     * @returns the svg\r\n     */\r\n    private _svgCheck(value: string): string {\r\n        // Skip SVG processing if no window/document or SVG support\r\n        if (typeof window === \"undefined\" || typeof document === \"undefined\" || !window.SVGSVGElement) {\r\n            return value;\r\n        }\r\n\r\n        if (window.SVGSVGElement && value.search(/(\\.svg|\\.svg?[?|#].*)$/gi) !== -1 && value.indexOf(\"#\") === value.lastIndexOf(\"#\")) {\r\n            this._isSVG = true;\r\n            value = this._sanitizeSVG(value);\r\n            const svgsrc = value.split(\"#\")[0];\r\n            const elemid = value.split(\"#\")[1];\r\n            // check if object alr exist in document\r\n            const svgExist = <HTMLObjectElement>document.body.querySelector('object[data=\"' + svgsrc + '\"]');\r\n            if (svgExist) {\r\n                const svgDoc = svgExist.contentDocument;\r\n                // get viewbox width and height, get svg document width and height in px\r\n                if (svgDoc && svgDoc.documentElement) {\r\n                    const vb = svgDoc.documentElement.getAttribute(\"viewBox\");\r\n                    const docwidth = Number(svgDoc.documentElement.getAttribute(\"width\"));\r\n                    const docheight = Number(svgDoc.documentElement.getAttribute(\"height\"));\r\n                    const elem = <SVGGraphicsElement>(<unknown>svgDoc.getElementById(elemid));\r\n                    if (elem && vb && docwidth && docheight) {\r\n                        this._getSVGAttribs(svgExist, elemid);\r\n                        return value;\r\n                    }\r\n                }\r\n\r\n                // wait for object to load\r\n                svgExist.addEventListener(\"load\", () => {\r\n                    this._getSVGAttribs(svgExist, elemid);\r\n                });\r\n            } else {\r\n                // create document object\r\n                const svgImage = document.createElement(\"object\");\r\n                svgImage.data = svgsrc;\r\n                svgImage.type = \"image/svg+xml\";\r\n                svgImage.width = \"0%\";\r\n                svgImage.height = \"0%\";\r\n                document.body.appendChild(svgImage);\r\n                // when the object has loaded, get the element attribs\r\n                svgImage.onload = () => {\r\n                    const svgobj = <HTMLObjectElement>document.body.querySelector('object[data=\"' + svgsrc + '\"]');\r\n                    if (svgobj) {\r\n                        this._getSVGAttribs(svgobj, elemid);\r\n                    }\r\n                };\r\n            }\r\n            return svgsrc;\r\n        } else {\r\n            return value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets sourceLeft, sourceTop, sourceWidth, sourceHeight automatically\r\n     * given external svg file and icon id\r\n     * @param svgsrc\r\n     * @param elemid\r\n     */\r\n    private _getSVGAttribs(svgsrc: HTMLObjectElement, elemid: string) {\r\n        const svgDoc = svgsrc.contentDocument;\r\n        // get viewbox width and height, get svg document width and height in px\r\n        if (svgDoc && svgDoc.documentElement) {\r\n            const vb = svgDoc.documentElement.getAttribute(\"viewBox\");\r\n            const docwidth = Number(svgDoc.documentElement.getAttribute(\"width\"));\r\n            const docheight = Number(svgDoc.documentElement.getAttribute(\"height\"));\r\n            // get element bbox and matrix transform\r\n            const elem = svgDoc.getElementById(elemid) as Nullable<SVGGraphicsElement>;\r\n            if (vb && docwidth && docheight && elem) {\r\n                const vbWidth = Number(vb.split(\" \")[2]);\r\n                const vbHeight = Number(vb.split(\" \")[3]);\r\n                const elemBbox = elem.getBBox();\r\n                let elemMatrixA = 1;\r\n                let elemMatrixD = 1;\r\n                let elemMatrixE = 0;\r\n                let elemMatrixF = 0;\r\n                const mainMatrix = elem.transform.baseVal.consolidate()!.matrix;\r\n                if (elem.transform && elem.transform.baseVal.consolidate()) {\r\n                    elemMatrixA = mainMatrix.a;\r\n                    elemMatrixD = mainMatrix.d;\r\n                    elemMatrixE = mainMatrix.e;\r\n                    elemMatrixF = mainMatrix.f;\r\n                }\r\n\r\n                // compute source coordinates and dimensions\r\n                this.sourceLeft = ((elemMatrixA * elemBbox.x + elemMatrixE) * docwidth) / vbWidth;\r\n                this.sourceTop = ((elemMatrixD * elemBbox.y + elemMatrixF) * docheight) / vbHeight;\r\n                this.sourceWidth = elemBbox.width * elemMatrixA * (docwidth / vbWidth);\r\n                this.sourceHeight = elemBbox.height * elemMatrixD * (docheight / vbHeight);\r\n                this._svgAttributesComputationCompleted = true;\r\n                this.onSVGAttributesComputedObservable.notifyObservers(this);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the cell width to use when animation sheet is enabled\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#image\r\n     */\r\n    @serialize()\r\n    get cellWidth(): number {\r\n        return this._cellWidth;\r\n    }\r\n    set cellWidth(value: number) {\r\n        if (this._cellWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the cell height to use when animation sheet is enabled\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#image\r\n     */\r\n    @serialize()\r\n    get cellHeight(): number {\r\n        return this._cellHeight;\r\n    }\r\n    set cellHeight(value: number) {\r\n        if (this._cellHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the cell id to use (this will turn on the animation sheet mode)\r\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/gui/gui#image\r\n     */\r\n    @serialize()\r\n    get cellId(): number {\r\n        return this._cellId;\r\n    }\r\n    set cellId(value: number) {\r\n        if (this._cellId === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellId = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Image\r\n     * @param name defines the control name\r\n     * @param url defines the image url\r\n     */\r\n    constructor(\r\n        public override name?: string,\r\n        url: Nullable<string> = null\r\n    ) {\r\n        super(name);\r\n        this.source = url;\r\n    }\r\n\r\n    /**\r\n     * Tests if a given coordinates belong to the current control\r\n     * @param x defines x coordinate to test\r\n     * @param y defines y coordinate to test\r\n     * @returns true if the coordinates are inside the control\r\n     */\r\n    public override contains(x: number, y: number): boolean {\r\n        if (!super.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        if (!this._detectPointerOnOpaqueOnly || !this._workingCanvas) {\r\n            return true;\r\n        }\r\n\r\n        const width = this._currentMeasure.width | 0;\r\n        const height = this._currentMeasure.height | 0;\r\n        const key = width + \"_\" + height;\r\n\r\n        let imageData = this._imageDataCache.data;\r\n\r\n        if (!imageData || this._imageDataCache.key !== key) {\r\n            const canvas = this._workingCanvas;\r\n            const context = canvas.getContext(\"2d\");\r\n\r\n            this._imageDataCache.data = imageData = context.getImageData(0, 0, width, height).data;\r\n            this._imageDataCache.key = key;\r\n        }\r\n\r\n        x = (x - this._currentMeasure.left) | 0;\r\n        y = (y - this._currentMeasure.top) | 0;\r\n\r\n        const pickedPixel = imageData[(x + y * width) * 4 + 3];\r\n\r\n        return pickedPixel > 0;\r\n    }\r\n\r\n    protected override _getTypeName(): string {\r\n        return \"Image\";\r\n    }\r\n\r\n    /** Force the control to synchronize with its content */\r\n    public synchronizeSizeWithContent() {\r\n        if (!this._loaded) {\r\n            return;\r\n        }\r\n\r\n        this.width = this._domImage.width + \"px\";\r\n        this.height = this._domImage.height + \"px\";\r\n    }\r\n\r\n    protected override _processMeasures(parentMeasure: Measure, context: ICanvasRenderingContext): void {\r\n        if (this._loaded) {\r\n            switch (this._stretch) {\r\n                case Image.STRETCH_NONE:\r\n                    break;\r\n                case Image.STRETCH_FILL:\r\n                    break;\r\n                case Image.STRETCH_UNIFORM:\r\n                    break;\r\n                case Image.STRETCH_NINE_PATCH:\r\n                    break;\r\n                case Image.STRETCH_EXTEND:\r\n                    if (this._autoScale) {\r\n                        this.synchronizeSizeWithContent();\r\n                    }\r\n                    if (this.parent && this.parent.parent) {\r\n                        // Will update root size if root is not the top root\r\n                        this.parent.adaptWidthToChildren = true;\r\n                        this.parent.adaptHeightToChildren = true;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n\r\n        super._processMeasures(parentMeasure, context);\r\n    }\r\n\r\n    private _prepareWorkingCanvasForOpaqueDetection() {\r\n        if (!this._detectPointerOnOpaqueOnly) {\r\n            return;\r\n        }\r\n\r\n        const width = this._currentMeasure.width;\r\n        const height = this._currentMeasure.height;\r\n\r\n        if (!this._workingCanvas) {\r\n            const engine = this._host?.getScene()?.getEngine() || EngineStore.LastCreatedEngine;\r\n            if (!engine) {\r\n                throw new Error(\"Invalid engine. Unable to create a canvas.\");\r\n            }\r\n            this._workingCanvas = engine.createCanvas(width, height);\r\n        }\r\n        const canvas = this._workingCanvas;\r\n\r\n        const context = canvas.getContext(\"2d\");\r\n\r\n        context.clearRect(0, 0, width, height);\r\n    }\r\n\r\n    private _drawImage(context: ICanvasRenderingContext, sx: number, sy: number, sw: number, sh: number, tx: number, ty: number, tw: number, th: number) {\r\n        context.drawImage(this._domImage, sx, sy, sw, sh, tx, ty, tw, th);\r\n\r\n        if (!this._detectPointerOnOpaqueOnly) {\r\n            return;\r\n        }\r\n\r\n        const transform = context.getTransform();\r\n\r\n        const canvas = this._workingCanvas!;\r\n        const workingCanvasContext = canvas.getContext(\"2d\");\r\n        workingCanvasContext.save();\r\n        const ttx = tx - this._currentMeasure.left;\r\n        const tty = ty - this._currentMeasure.top;\r\n        workingCanvasContext.setTransform(transform.a, transform.b, transform.c, transform.d, (ttx + tw) / 2, (tty + th) / 2);\r\n        workingCanvasContext.translate(-(ttx + tw) / 2, -(tty + th) / 2);\r\n\r\n        workingCanvasContext.drawImage(this._domImage, sx, sy, sw, sh, ttx, tty, tw, th);\r\n        workingCanvasContext.restore();\r\n    }\r\n\r\n    public override _draw(context: ICanvasRenderingContext): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX * this._host.idealRatio;\r\n            context.shadowOffsetY = this.shadowOffsetY * this._host.idealRatio;\r\n        }\r\n\r\n        let x, y, width, height;\r\n        if (this.cellId == -1) {\r\n            x = this._sourceLeft;\r\n            y = this._sourceTop;\r\n\r\n            width = this._sourceWidth ? this._sourceWidth : this._imageWidth;\r\n            height = this._sourceHeight ? this._sourceHeight : this._imageHeight;\r\n        } else {\r\n            const rowCount = this._domImage.naturalWidth / this.cellWidth;\r\n            const column = (this.cellId / rowCount) >> 0;\r\n            const row = this.cellId % rowCount;\r\n\r\n            x = this.cellWidth * row;\r\n            y = this.cellHeight * column;\r\n            width = this.cellWidth;\r\n            height = this.cellHeight;\r\n        }\r\n\r\n        this._prepareWorkingCanvasForOpaqueDetection();\r\n\r\n        this._applyStates(context);\r\n        if (this._loaded) {\r\n            switch (this._stretch) {\r\n                case Image.STRETCH_NONE:\r\n                    this._drawImage(context, x, y, width, height, this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                    break;\r\n                case Image.STRETCH_FILL:\r\n                    this._drawImage(context, x, y, width, height, this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                    break;\r\n                case Image.STRETCH_UNIFORM: {\r\n                    const hRatio = this._currentMeasure.width / width;\r\n                    const vRatio = this._currentMeasure.height / height;\r\n                    const ratio = Math.min(hRatio, vRatio);\r\n                    const centerX = (this._currentMeasure.width - width * ratio) / 2;\r\n                    const centerY = (this._currentMeasure.height - height * ratio) / 2;\r\n\r\n                    this._drawImage(context, x, y, width, height, this._currentMeasure.left + centerX, this._currentMeasure.top + centerY, width * ratio, height * ratio);\r\n                    break;\r\n                }\r\n                case Image.STRETCH_EXTEND:\r\n                    this._drawImage(context, x, y, width, height, this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                    break;\r\n                case Image.STRETCH_NINE_PATCH:\r\n                    this._renderNinePatch(context, x, y, width, height);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    private _renderNinePatch(context: ICanvasRenderingContext, sx: number, sy: number, sw: number, sh: number): void {\r\n        const idealRatio = this.host.idealRatio;\r\n        const leftWidth = this._sliceLeft;\r\n        const topHeight = this._sliceTop;\r\n        const bottomHeight = sh - this._sliceBottom;\r\n        const rightWidth = sw - this._sliceRight;\r\n        const centerWidth = this._sliceRight - this._sliceLeft;\r\n        const centerHeight = this._sliceBottom - this._sliceTop;\r\n        const leftWidthAdjusted = Math.round(leftWidth * idealRatio);\r\n        const topHeightAdjusted = Math.round(topHeight * idealRatio);\r\n        const bottomHeightAdjusted = Math.round(bottomHeight * idealRatio);\r\n        const rightWidthAdjusted = Math.round(rightWidth * idealRatio);\r\n        const targetCenterWidth = Math.round(this._currentMeasure.width) - rightWidthAdjusted - leftWidthAdjusted + 2;\r\n        const targetCenterHeight = Math.round(this._currentMeasure.height) - bottomHeightAdjusted - topHeightAdjusted + 2;\r\n        const centerLeftOffset = Math.round(this._currentMeasure.left) + leftWidthAdjusted - 1;\r\n        const centerTopOffset = Math.round(this._currentMeasure.top) + topHeightAdjusted - 1;\r\n        const rightOffset = Math.round(this._currentMeasure.left + this._currentMeasure.width) - rightWidthAdjusted;\r\n        const bottomOffset = Math.round(this._currentMeasure.top + this._currentMeasure.height) - bottomHeightAdjusted;\r\n\r\n        //Top Left\r\n        this._drawImage(context, sx, sy, leftWidth, topHeight, this._currentMeasure.left, this._currentMeasure.top, leftWidthAdjusted, topHeightAdjusted);\r\n        //Top\r\n        this._drawImage(context, sx + this._sliceLeft, sy, centerWidth, topHeight, centerLeftOffset + 1, this._currentMeasure.top, targetCenterWidth - 2, topHeightAdjusted);\r\n        //Top Right\r\n        this._drawImage(context, sx + this._sliceRight, sy, rightWidth, topHeight, rightOffset, this._currentMeasure.top, rightWidthAdjusted, topHeightAdjusted);\r\n        //Left\r\n        this._drawImage(context, sx, sy + this._sliceTop, leftWidth, centerHeight, this._currentMeasure.left, centerTopOffset + 1, leftWidthAdjusted, targetCenterHeight - 2);\r\n        // Center\r\n        this._drawImage(\r\n            context,\r\n            sx + this._sliceLeft,\r\n            sy + this._sliceTop,\r\n            centerWidth,\r\n            centerHeight,\r\n            centerLeftOffset + 1,\r\n            centerTopOffset + 1,\r\n            targetCenterWidth - 2,\r\n            targetCenterHeight - 2\r\n        );\r\n        //Right\r\n        this._drawImage(\r\n            context,\r\n            sx + this._sliceRight,\r\n            sy + this._sliceTop,\r\n            rightWidth,\r\n            centerHeight,\r\n            rightOffset,\r\n            centerTopOffset + 1,\r\n            rightWidthAdjusted,\r\n            targetCenterHeight - 2\r\n        );\r\n        //Bottom Left\r\n        this._drawImage(context, sx, sy + this._sliceBottom, leftWidth, bottomHeight, this._currentMeasure.left, bottomOffset, leftWidthAdjusted, bottomHeightAdjusted);\r\n        //Bottom\r\n        this._drawImage(\r\n            context,\r\n            sx + this.sliceLeft,\r\n            sy + this._sliceBottom,\r\n            centerWidth,\r\n            bottomHeight,\r\n            centerLeftOffset + 1,\r\n            bottomOffset,\r\n            targetCenterWidth - 2,\r\n            bottomHeightAdjusted\r\n        );\r\n        //Bottom Right\r\n        this._drawImage(context, sx + this._sliceRight, sy + this._sliceBottom, rightWidth, bottomHeight, rightOffset, bottomOffset, rightWidthAdjusted, bottomHeightAdjusted);\r\n    }\r\n\r\n    public override dispose() {\r\n        super.dispose();\r\n        this.onImageLoadedObservable.clear();\r\n        this.onSVGAttributesComputedObservable.clear();\r\n        this._removeCacheUsage(this._source);\r\n    }\r\n\r\n    // Static\r\n    /** STRETCH_NONE */\r\n    public static readonly STRETCH_NONE = 0;\r\n    /** STRETCH_FILL */\r\n    public static readonly STRETCH_FILL = 1;\r\n    /** STRETCH_UNIFORM */\r\n    public static readonly STRETCH_UNIFORM = 2;\r\n    /** STRETCH_EXTEND */\r\n    public static readonly STRETCH_EXTEND = 3;\r\n    /** NINE_PATCH */\r\n    public static readonly STRETCH_NINE_PATCH = 4;\r\n}\r\nRegisterClass(\"BABYLON.GUI.Image\", Image);\r\n", "import type { Nullable } from \"core/types\";\r\nimport type { Vector2 } from \"core/Maths/math.vector\";\r\n\r\nimport { Rectangle } from \"./rectangle\";\r\nimport { Control } from \"./control\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { Image } from \"./image\";\r\nimport { RegisterClass } from \"core/Misc/typeStore\";\r\nimport type { PointerInfoBase } from \"core/Events/pointerEvents\";\r\nimport type { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport type { ICanvasRenderingContext } from \"core/Engines/ICanvas\";\r\n\r\n/**\r\n * Class used to create 2D buttons\r\n */\r\nexport class Button extends Rectangle {\r\n    /**\r\n     * Function called to generate a pointer enter animation\r\n     */\r\n    public pointerEnterAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer out animation\r\n     */\r\n    public pointerOutAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer down animation\r\n     */\r\n    public pointerDownAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer up animation\r\n     */\r\n    public pointerUpAnimation: () => void;\r\n\r\n    private _image: Nullable<Image>;\r\n    /**\r\n     * Returns the image part of the button (if any)\r\n     */\r\n    public get image(): Nullable<Image> {\r\n        return this._image;\r\n    }\r\n\r\n    private _textBlock: Nullable<TextBlock>;\r\n    /**\r\n     * Returns the TextBlock part of the button (if any)\r\n     */\r\n    public get textBlock(): Nullable<TextBlock> {\r\n        return this._textBlock;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Button\r\n     * @param name defines the name of the button\r\n     */\r\n    constructor(public override name?: string) {\r\n        super(name);\r\n\r\n        this.thickness = 1;\r\n        this.isPointerBlocker = true;\r\n\r\n        let alphaStore: Nullable<number> = null;\r\n\r\n        this.pointerEnterAnimation = () => {\r\n            alphaStore = this.alpha;\r\n            this.alpha -= 0.1;\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (alphaStore !== null) {\r\n                this.alpha = alphaStore;\r\n            }\r\n        };\r\n\r\n        this.pointerDownAnimation = () => {\r\n            this.scaleX -= 0.05;\r\n            this.scaleY -= 0.05;\r\n        };\r\n\r\n        this.pointerUpAnimation = () => {\r\n            this.scaleX += 0.05;\r\n            this.scaleY += 0.05;\r\n        };\r\n    }\r\n\r\n    protected override _getTypeName(): string {\r\n        return \"Button\";\r\n    }\r\n\r\n    // While being a container, the button behaves like a control.\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _processPicking(x: number, y: number, pi: PointerInfoBase, type: number, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): boolean {\r\n        if (!this._isEnabled || !this.isHitTestVisible || !this.isVisible || this.notRenderable) {\r\n            return false;\r\n        }\r\n\r\n        if (!super.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.delegatePickingToChildren) {\r\n            let contains = false;\r\n            for (let index = this._children.length - 1; index >= 0; index--) {\r\n                const child = this._children[index];\r\n                if (child.isEnabled && child.isHitTestVisible && child.isVisible && !child.notRenderable && child.contains(x, y)) {\r\n                    contains = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!contains) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        this._processObservables(type, x, y, pi, pointerId, buttonIndex, deltaX, deltaY);\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _onPointerEnter(target: Control, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerEnter(target, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.isReadOnly && this.pointerEnterAnimation) {\r\n            this.pointerEnterAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _onPointerOut(target: Control, pi: PointerInfoBase, force = false): void {\r\n        if (!this.isReadOnly && this.pointerOutAnimation) {\r\n            this.pointerOutAnimation();\r\n        }\r\n\r\n        super._onPointerOut(target, pi, force);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.isReadOnly && this.pointerDownAnimation) {\r\n            this.pointerDownAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    protected override _getRectangleFill(context: ICanvasRenderingContext) {\r\n        if (this.isEnabled) {\r\n            return this._getBackgroundColor(context);\r\n        } else {\r\n            return this._disabledColor;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean, pi: PointerInfoBase): void {\r\n        if (!this.isReadOnly && this.pointerUpAnimation) {\r\n            this.pointerUpAnimation();\r\n        }\r\n\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick, pi);\r\n    }\r\n\r\n    /**\r\n     * Serializes the current button\r\n     * @param serializationObject defines the JSON serialized object\r\n     * @param force force serialization even if isSerializable === false\r\n     * @param allowCanvas defines if the control is allowed to use a Canvas2D object to serialize\r\n     */\r\n    public override serialize(serializationObject: any, force: boolean, allowCanvas: boolean) {\r\n        super.serialize(serializationObject, force, allowCanvas);\r\n        if (!this.isSerializable && !force) {\r\n            return;\r\n        }\r\n\r\n        if (this._textBlock) {\r\n            serializationObject.textBlockName = this._textBlock.name;\r\n        }\r\n        if (this._image) {\r\n            serializationObject.imageName = this._image.name;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public override _parseFromContent(serializedObject: any, host: AdvancedDynamicTexture) {\r\n        super._parseFromContent(serializedObject, host);\r\n\r\n        if (serializedObject.textBlockName) {\r\n            this._textBlock = this.getChildByName(serializedObject.textBlockName) as Nullable<TextBlock>;\r\n        }\r\n\r\n        if (serializedObject.imageName) {\r\n            this._image = this.getChildByName(serializedObject.imageName) as Nullable<Image>;\r\n        }\r\n    }\r\n\r\n    // Statics\r\n    /**\r\n     * Creates a new button made with an image and a text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageButton(name: string, text: string, imageUrl: string): Button {\r\n        const result = new this(name);\r\n\r\n        // Adding text\r\n        const textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        textBlock.paddingLeft = \"20%\";\r\n        result.addControl(textBlock);\r\n\r\n        // Adding image\r\n        const iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.width = \"20%\";\r\n        iconImage.stretch = Image.STRETCH_UNIFORM;\r\n        iconImage.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        result.addControl(iconImage);\r\n\r\n        // Store\r\n        result._image = iconImage;\r\n        result._textBlock = textBlock;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with an image\r\n     * @param name defines the name of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageOnlyButton(name: string, imageUrl: string): Button {\r\n        const result = new this(name);\r\n\r\n        // Adding image\r\n        const iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.stretch = Image.STRETCH_FILL;\r\n        iconImage.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        result.addControl(iconImage);\r\n\r\n        // Store\r\n        result._image = iconImage;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with a text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @returns a new Button\r\n     */\r\n    public static CreateSimpleButton(name: string, text: string): Button {\r\n        const result = new this(name);\r\n\r\n        // Adding text\r\n        const textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        result.addControl(textBlock);\r\n\r\n        // Store\r\n        result._textBlock = textBlock;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with an image and a centered text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageWithCenterTextButton(name: string, text: string, imageUrl: string): Button {\r\n        const result = new this(name);\r\n\r\n        // Adding image\r\n        const iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.stretch = Image.STRETCH_FILL;\r\n        result.addControl(iconImage);\r\n\r\n        // Adding text\r\n        const textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        result.addControl(textBlock);\r\n\r\n        // Store\r\n        result._image = iconImage;\r\n        result._textBlock = textBlock;\r\n\r\n        return result;\r\n    }\r\n}\r\nRegisterClass(\"BABYLON.GUI.Button\", Button);\r\n"],
  "mappings": "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",
  "names": []
}
